<Window x:Class="OurDecor.AddEditProductWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Добавить / Редактировать продукт"
        Height="650" Width="700"
        WindowStartupLocation="CenterOwner"
        Icon="Resources/logo.ico"
        FontFamily="{StaticResource MainFont}"
        FontSize="20"
        Background="{StaticResource BackgroundBrush}">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20" Orientation="Vertical" >

            <!-- Заголовок -->
            <Border Background="{StaticResource SecondaryBrush}" Padding="15" CornerRadius="6">
                <TextBlock Text="Добавить / Редактировать продукт"
                           FontSize="26"
                           FontWeight="Bold"
                           Foreground="{StaticResource PrimaryBrush}"
                           HorizontalAlignment="Center"/>
            </Border>

            <!-- Блоки ввода -->
            <StackPanel>
                <!-- Артикул -->
                <Border Background="White" BorderBrush="#E0E0E0" BorderThickness="1" Padding="10" CornerRadius="6" Margin="0,0,0,8">
                    <StackPanel>
                        <TextBlock Text="Артикул" Foreground="{StaticResource PrimaryBrush}" FontWeight="SemiBold" Margin="0,0,0,5"/>
                        <TextBox x:Name="ArticleTextBox" Height="40" Padding="6"/>
                    </StackPanel>
                </Border>

                <!-- Тип продукта -->
                <Border Background="White" BorderBrush="#E0E0E0" BorderThickness="1" Padding="10" CornerRadius="6" Margin="0,0,0,8">
                    <StackPanel>
                        <TextBlock Text="Тип продукта" Foreground="{StaticResource PrimaryBrush}" FontWeight="SemiBold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="ProductTypeComboBox"
                                  Height="40"
                                  DisplayMemberPath="Name"
                                  SelectedValuePath="ProductTypeID"/>
                    </StackPanel>
                </Border>

                <!-- Наименование -->
                <Border Background="White" BorderBrush="#E0E0E0" BorderThickness="1" Padding="10" CornerRadius="6" Margin="0,0,0,8">
                    <StackPanel>
                        <TextBlock Text="Наименование" Foreground="{StaticResource PrimaryBrush}" FontWeight="SemiBold" Margin="0,0,0,5"/>
                        <TextBox x:Name="NameTextBox" Height="40" Padding="6"/>
                    </StackPanel>
                </Border>

                <!-- Мин. стоимость -->
                <Border Background="White" BorderBrush="#E0E0E0" BorderThickness="1" Padding="10" CornerRadius="6" Margin="0,0,0,8">
                    <StackPanel>
                        <TextBlock Text="Мин. стоимость (р)" Foreground="{StaticResource PrimaryBrush}" FontWeight="SemiBold" Margin="0,0,0,5"/>
                        <TextBox x:Name="MinCostTextBox" Height="40" Padding="6"/>
                    </StackPanel>
                </Border>

                <!-- Ширина -->
                <Border Background="White" BorderBrush="#E0E0E0" BorderThickness="1" Padding="10" CornerRadius="6" Margin="0,0,0,8">
                    <StackPanel>
                        <TextBlock Text="Ширина (м)" Foreground="{StaticResource PrimaryBrush}" FontWeight="SemiBold" Margin="0,0,0,5"/>
                        <TextBox x:Name="WidthTextBox" Height="40" Padding="6"/>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Материалы -->
            <Border Background="White" BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="6" Padding="12" Margin="0,10,0,0">
                <StackPanel>
                    <TextBlock Text="Материалы" FontSize="22" FontWeight="Bold" Foreground="{StaticResource PrimaryBrush}" Margin="0,0,0,10"/>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <ComboBox x:Name="MaterialComboBox"
                                  Width="250"
                                  DisplayMemberPath="Name"
                                  SelectedValuePath="MaterialID"
                                  Height="40"
                                  Margin="0,0,8,0"/>
                        <TextBox x:Name="MaterialCountTextBox" Width="80" Margin="0,0,8,0" Height="40"
                                 Foreground="Gray" Text="Кол-во"
                                 GotFocus="MaterialCountTextBox_GotFocus"
                                 LostFocus="MaterialCountTextBox_LostFocus"/>
                        <Button Content="Добавить" Click="AddMaterialButton_Click" Width="110" Height="40" Style="{StaticResource PrimaryButton}"/>
                    </StackPanel>

                    <DataGrid x:Name="MaterialsDataGrid"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              IsReadOnly="True"
                              Height="200"
                              RowBackground="White"
                              AlternatingRowBackground="#F5F5F5"
                              GridLinesVisibility="Horizontal">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Материал" Binding="{Binding MaterialName}" Width="*"/>
                            <DataGridTextColumn Header="Количество" Binding="{Binding Count}" Width="100"/>
                            <DataGridTextColumn Header="Цена (р.)" Binding="{Binding Price}" Width="100"/>
                            <DataGridTextColumn Header="Тип" Binding="{Binding MaterialType}" Width="150"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>
            </Border>

            <!-- Кнопки -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
                <Button x:Name="CancelButton" Content="Отмена" Width="120" Height="45" Margin="0,0,10,0" Click="BackButton_Click"/>
                <Button x:Name="SaveButton" Content="Сохранить" Width="160" Height="45" Style="{StaticResource PrimaryButton}" Click="SaveButton_Click"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Window>
